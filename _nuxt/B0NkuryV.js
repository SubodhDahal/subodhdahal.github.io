import{u as w,q as x}from"./Dx-r16H0.js";import{m as g}from"./DeU3YTms.js";function b(y={}){const{quantity:c=100,page:f=1,pageSize:i=10}=y,h=g([]),o=g(!1),l=g(null);async function s(t=100){try{const{data:e}=await w(`articles-${t}`,()=>x("blog").select("title","description","tags","postDate","path","url").order("postDate","DESC").limit(t).all());return e.value||[]}catch(e){return console.error("Error fetching articles:",e),l.value="Failed to fetch articles",[]}}const A=async()=>{o.value=!0,l.value=null;try{h.value=await s(c)}catch{l.value="Failed to fetch articles"}finally{o.value=!1}};A();async function d(){const t=(f-1)*i,e=await s(c),r=Math.ceil(e.length/i);return{articles:e.slice(t,t+i),totalPages:r,currentPage:f}}async function p(t){const e=await s(10),r=e.findIndex(a=>a.path===t);return{prev:r>0?e[r-1]:null,next:r<e.length-1?e[r+1]:null}}async function v(t,e){return t?.length?(await s(c)).filter(a=>a.path!==e&&Array.isArray(a.tags)&&a.tags.some(n=>t.includes(n))).sort((a,n)=>{const m=Array.isArray(a.tags)?a.tags.filter(u=>t.includes(u)).length:0;return(Array.isArray(n.tags)?n.tags.filter(u=>t.includes(u)).length:0)-m}).slice(0,3):[]}return{articles:h,isLoading:o,error:l,fetchArticles:A,getPaginatedArticles:d,getAdjacentArticles:p,getRelatedArticles:v}}export{b as u};
