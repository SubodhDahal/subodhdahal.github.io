import{u as w,q as x}from"./BH9JdX_S.js";import{n as f}from"./C1GR8afv.js";function P(A={}){const{quantity:c=100,page:h=1,pageSize:i=10}=A,g=f([]),o=f(!1),r=f(null);async function n(t=100){try{const{data:e}=await w("articles-all",()=>x("blog").select("title","description","tags","postDate","path","url").order("postDate","DESC").limit(t).all());return e.value||[]}catch(e){return console.error("Error fetching articles:",e),r.value="Failed to fetch articles",[]}}const y=async()=>{o.value=!0,r.value=null;try{g.value=await n(c)}catch{r.value="Failed to fetch articles"}finally{o.value=!1}};y();async function d(){const t=(h-1)*i,e=await n(c),l=Math.ceil(e.length/i);return{articles:e.slice(t,t+i),totalPages:l,currentPage:h}}async function p(t){const e=await n(10),l=e.findIndex(a=>a.path===t);return{prev:l>0?e[l-1]:null,next:l<e.length-1?e[l+1]:null}}async function v(t,e){return t!=null&&t.length?(await n(c)).filter(a=>a.path!==e&&Array.isArray(a.tags)&&a.tags.some(s=>t.includes(s))).sort((a,s)=>{const m=Array.isArray(a.tags)?a.tags.filter(u=>t.includes(u)).length:0;return(Array.isArray(s.tags)?s.tags.filter(u=>t.includes(u)).length:0)-m}).slice(0,3):[]}return{articles:g,isLoading:o,error:r,fetchArticles:y,getPaginatedArticles:d,getAdjacentArticles:p,getRelatedArticles:v}}export{P as u};
