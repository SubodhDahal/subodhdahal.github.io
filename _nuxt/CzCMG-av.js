import{q as x,u as M}from"./D6GmVbGU.js";import{l as d}from"./BEAhfQqP.js";function j(w={}){const{quantity:s=100,content:a="blog",page:y=1,pageSize:o=10,currentArticle:I,relatedTo:P}=w,g=d([]),u=d(!1),r=d(null);async function c(t=100,e){try{const n=x(e).where({published:{$ne:!1}}).without("body").sort({postDate:-1}).limit(t),{data:l}=await M("articles-all",()=>n.find());return l.value||[]}catch(n){return console.error("Error fetching articles:",n),r.value="Failed to fetch articles",[]}}const A=async()=>{u.value=!0,r.value=null;try{g.value=await c(s,a)}catch{r.value="Failed to fetch articles"}finally{u.value=!1}};A();async function m(){const t=(y-1)*o,e=await c(s,a),n=Math.ceil(e.length/o);return{articles:e.slice(t,t+o),totalPages:n,currentPage:y}}async function b(t){const e=await c(1/0,a),n=e.findIndex(l=>l._path===t);return{prev:n>0?e[n-1]:null,next:n<e.length-1?e[n+1]:null}}async function q(t,e){return t!=null&&t.length?(await c(s,a)).filter(l=>{var i;return l._path!==e&&((i=l.tags)==null?void 0:i.some(f=>t.includes(f)))}).sort((l,i)=>{var p,v;const f=((p=l.tags)==null?void 0:p.filter(h=>t.includes(h)).length)||0;return(((v=i.tags)==null?void 0:v.filter(h=>t.includes(h)).length)||0)-f}).slice(0,3):[]}return{articles:g,isLoading:u,error:r,fetchArticles:A,getPaginatedArticles:m,getAdjacentArticles:b,getRelatedArticles:q}}export{j as u};
