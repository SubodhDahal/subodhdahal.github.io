import{u as w,q as x}from"./2OwAzOQC.js";import{m as f}from"./CBIDn9Dk.js";function b(y={}){const{quantity:c=100,page:h=1,pageSize:i=10}=y,g=f([]),o=f(!1),l=f(null);async function n(t=100){try{const{data:e}=await w(`articles-${t}`,()=>x("blog").select("title","description","tags","postDate","path","url").order("postDate","DESC").limit(t).all());return e.value||[]}catch(e){return console.error("Error fetching articles:",e),l.value="Failed to fetch articles",[]}}const A=async()=>{o.value=!0,l.value=null;try{g.value=await n(c)}catch{l.value="Failed to fetch articles"}finally{o.value=!1}};A();async function d(){const t=(h-1)*i,e=await n(c),r=Math.ceil(e.length/i);return{articles:e.slice(t,t+i),totalPages:r,currentPage:h}}async function p(t){const e=await n(10),r=e.findIndex(a=>a.path===t);return{prev:r>0?e[r-1]:null,next:r<e.length-1?e[r+1]:null}}async function v(t,e){return t!=null&&t.length?(await n(c)).filter(a=>a.path!==e&&Array.isArray(a.tags)&&a.tags.some(s=>t.includes(s))).sort((a,s)=>{const m=Array.isArray(a.tags)?a.tags.filter(u=>t.includes(u)).length:0;return(Array.isArray(s.tags)?s.tags.filter(u=>t.includes(u)).length:0)-m}).slice(0,3):[]}return{articles:g,isLoading:o,error:l,fetchArticles:A,getPaginatedArticles:d,getAdjacentArticles:p,getRelatedArticles:v}}export{b as u};
