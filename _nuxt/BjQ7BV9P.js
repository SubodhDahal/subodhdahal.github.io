import{_ as v}from"./CihC4wva.js";import{f as b,s as d,j as q,v as A,c as s,m as l,t as _,F as B,r as C,o as e,b as N,w as F,x as m,a as g,i as L,e as $}from"./Ov4o0JRq.js";import{q as j,u as D}from"./CEsL1JzZ.js";const V={key:0,class:"text-red-500 text-center my-4"},E={key:1,class:"text-center my-4"},T={key:2,class:"flex flex-wrap"},P=["src","alt"],S={class:"p-0 pt-4 md:p-6 md:pt-0 xxlmin:w-1/2 xxlmax:w-full"},z={class:"text-2xl font-bold"},G={key:0,class:"text-gray-600 dark:text-white"},H={key:3,class:"text-center text-gray-500"},M=b({__name:"BlogPosts",props:{tags:{default:()=>[]},quantity:{default:100},content:{default:"blog"}},async setup(w){let x,f;const c=w,r=d([]),i=d(!1),o=d(null);async function k(a=[],p=100,u){try{const n=j(u).where({published:{$ne:!1},...a.length>0&&{tags:{$contains:a}}}).without("body").sort({postDate:-1}).limit(p),{data:t}=await D(`articles-${a.join("-")}`,()=>n.find());return t.value||[]}catch(n){return console.error("Error fetching articles:",n),o.value="Failed to fetch articles",[]}}const h=async()=>{i.value=!0,o.value=null;try{r.value=await k(c.tags,c.quantity,c.content)}catch{o.value="Failed to fetch articles"}finally{i.value=!1}};return[x,f]=q(()=>h()),await x,f(),A(()=>c.tags,async a=>{await h()},{deep:!0}),(a,p)=>{const u=v,n=$;return e(),s("div",null,[l(o)?(e(),s("div",V,_(l(o)),1)):l(i)?(e(),s("div",E," Loading articles... ")):l(r).length?(e(),s("ul",T,[(e(!0),s(B,null,C(l(r),t=>(e(),s("li",{key:t.url||t._path,class:"xs:w-full md:w-1/2 px-2 xs:mb-6 md:mb-12 mb-6 article-card"},[N(n,{to:t.url||t._path,target:t.url?"_blank":"_self",class:"md:flex transition-shadow duration-150 ease-in-out shadow-sm hover:shadow-md xxlmax:flex-col"},{default:F(()=>{var y;return[t.image?(e(),s("img",{key:0,class:"w-full md:w-48 xxlmin:w-1/2 xxlmax:w-full h-48 mx-auto object-cover",src:t.image,alt:t.title},null,8,P)):m("",!0),g("div",S,[g("h2",z,_(t.title),1),t.description?(e(),s("p",G,_(t.description),1)):m("",!0),(y=t.tags)!=null&&y.length?(e(),L(u,{key:1,tags:t.tags,class:"mt-2"},null,8,["tags"])):m("",!0)])]}),_:2},1032,["to","target"])]))),128))])):(e(),s("p",H," No articles found "))])}}});export{M as _};
